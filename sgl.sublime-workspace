{
	"auto_complete":
	{
		"selected_items":
		[
			[
				"li",
				"listar_equipamentos"
			],
			[
				"men",
				"mensagem_sucesso"
			],
			[
				"c",
				"class"
			],
			[
				"fun",
				"function"
			],
			[
				"m",
				"modelo"
			],
			[
				"fo",
				"fornecedor"
			],
			[
				"data",
				"dataCompra"
			],
			[
				"con",
				"console"
			],
			[
				"btn",
				"bntSalvarEquipamento"
			],
			[
				"modal",
				"modalHeader"
			],
			[
				"o",
				"option	Tag"
			]
		]
	},
	"buffers":
	[
		{
			"file": "src/Template/Locals/view.ctp",
			"settings":
			{
				"buffer_size": 2089,
				"line_ending": "Unix"
			}
		},
		{
			"file": "webroot/js/equipamentos.js",
			"settings":
			{
				"buffer_size": 4877,
				"line_ending": "Unix"
			}
		},
		{
			"contents": "$(document).ready(function(){\n	var container = $('.container');\n	var tabela_lista_equipamentos = $('.equipamentos');\n	var modal = container.find('.modal');\n	var headerModal = $('.modal-title');\n	var contentModal = $('.modal-body');\n	var mensagem = $('.mensagem');\n\n	tabela_lista_equipamentos.on('click', '.btn_alertar', function(event){\n		event.preventDefault();\n		\n		now = new Date;\n\n		var idEquipamento = $(this).closest('tr').attr('data-id');\n\n		$.ajax({\n\n\n			url: 'http://localhost:8080/equipamentos/view/'+idEquipamento,\n			dataType: 'json',\n			type: 'GET',\n\n			beforeSend: function(request){\n				return request.setRequestHeader(\"X-CSRF-TOKEN\", $(\"meta[name='_csrfToken']\").attr('content'));\n			},\n			\n			success: function(equipamento){\n\n				$('.modal.fade').modal('show');\n\n				var conteudoHeader = \"Alertar sobre o \"+equipamento['equipamento'].nome_fantasia+\" [ Tombo: \"+equipamento['equipamento'].tombo+\" ]\";\n				headerModal.html(conteudoHeader);\n\n				var conteudoModal = 	'<form class=\"form-horizontal\">';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\">Tombo</label>  ';\n					conteudoModal += 	'<div class=\"col-md-6\"><input id=\"tombo_equipamento\"type=\"text\" class=\"form-control input-md\" value=\"'+equipamento['equipamento'].tombo+'\" disabled></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\" for=\"usuario\">Usuario</label>  ';\n					conteudoModal += 	'<div class=\"col-md-6\"><input id=\"usuario\"type=\"text\"class=\"form-control input-md\" value=\"1\" disabled></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\" for=\"data_alerta\">Data do Alerta</label>  ';\n					conteudoModal += 	'<div class=\"col-md-6\"><input id=\"data_alerta\"type=\"text\"class=\"form-control input-md\" value=\"'+now.getDate()+'-'+(now.getMonth()+1)+'-'+now.getFullYear()+'\" disabled></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\" for=\"status_alerta\">Status do alerta</label>  ';\n					conteudoModal += 	'<div class=\"col-md-6\"><input id=\"status_alerta\"type=\"text\" placeholder=\"\" class=\"form-control input-md\" value=\"Pendente\" disabled></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\">Descrição</label>';\n					conteudoModal += 	'<div class=\"col-md-6\"><textarea rows=\"4\" class=\"form-control\" id=\"descricao\" placeholder=\"Descreva brevemente o problema do equipamento...\"></textarea></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'<div class=\"form-group\">';\n					conteudoModal += 	'<label class=\"col-md-4 control-label\"></label>';\n					conteudoModal += 	'<div class=\"col-md-4\"><button id=\"btn_enviar_alerta\" class=\"btn btn-success\">Enviar</button></div>';\n					conteudoModal += 	'</div>';\n\n					conteudoModal += 	'</form>';\n\n				contentModal.html(conteudoModal);\n\n\n				$('#btn_enviar_alerta').on('click', function(event){\n					event.preventDefault();\n\n					var tombo_equipamento = $('#tombo_equipamento').val();\n					var usuario = $('#usuario').val();\n					var data_alerta = $('#data_alerta').val();\n					var status_alerta = $('#status_alerta').val();\n					var descricao = $('#descricao').val();\n\n					$.ajax({\n\n						url: 'http://localhost:8080/alertas/add',\n						type: 'PUT',\n						data: 'tombo_equipamento='+tombo_equipamento+'&usuario='+usuario+'&data_alerta='+data_alerta+'&status_alerta='+status_alerta+'&descricao='+descricao,\n						\n						beforeSend: function(request){\n							return request.setRequestHeader(\"X-CSRF-TOKEN\", $(\"meta[name='_csrfToken']\").attr('content'));\n						},\n\n						success: function(data){\n							if(data == 'Alerta salvo'){\n\n								var mensagem_sucesso = 	'<div class=\"alert alert-success\" role=\"alert\">';\n									mensagem_sucesso +=	'<p class=\"text-center\">Alerta enviado com sucesso.</p>';\n									mensagem_sucesso +=	'</div>';\n\n								mensagem.html(mensagem_sucesso);\n\n								alteraStatusEquipamento(equipamento);\n\n								setTimeout(function(){\n									location.reload();									\n								},2000);\n							}\n						}\n\n\n\n					});\n\n				});\n\n			}\n\n		});\n\n	});\n\n});\n\nfunction alteraStatusEquipamento(equipamento){\n\n	$.ajax({\n\n\n		url: 'http://localhost:8080/equipamentos/edit/'+equipamento['equipamento'].id,\n		type: 'PUT',\n		data: 'tombo='+equipamento['equipamento'].tombo\n				+'&nome_fantasia='+equipamento['equipamento'].nome_fantasia\n				+'&status=Alerta&cod_local='+equipamento['equipamento'].cod_local\n				+\"&data_compra=\"+equipamento['equipamento'].data_compra\n				+\"&fornecedor=\"+equipamento['equipamento'].fornecedor\n				+\"&modelo=\"+equipamento['equipamento'].modelo\n				+\"&responsavel=\"+equipamento['equipamento'].responsavel\n				+\"&id_tipo=\"+equipamento['equipamento'].id_tipo,\n\n		beforeSend: function(request){\n			return request.setRequestHeader(\"X-CSRF-TOKEN\", $(\"meta[name='_csrfToken']\").attr('content'));\n		},\n\n		success: function(data){\n			console.log('');\n		}\n\n	});\n\n}",
			"settings":
			{
				"buffer_size": 5192,
				"line_ending": "Unix",
				"name": "$(document).ready(function(){"
			}
		},
		{
			"file": "src/Controller/EquipamentosController.php",
			"settings":
			{
				"buffer_size": 3927,
				"line_ending": "Unix"
			}
		},
		{
			"file": "config/routes.php",
			"settings":
			{
				"buffer_size": 2998,
				"line_ending": "Unix"
			}
		}
	],
	"build_system": "",
	"build_system_choices":
	[
	],
	"build_varint": "",
	"command_palette":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"console":
	{
		"height": 0.0,
		"history":
		[
		]
	},
	"distraction_free":
	{
		"menu_visible": true,
		"show_minimap": false,
		"show_open_files": false,
		"show_tabs": false,
		"side_bar_visible": false,
		"status_bar_visible": false
	},
	"expanded_folders":
	[
		"/home/ivanov/Documentos/sgl",
		"/home/ivanov/Documentos/sgl/src",
		"/home/ivanov/Documentos/sgl/src/Controller",
		"/home/ivanov/Documentos/sgl/src/Template",
		"/home/ivanov/Documentos/sgl/src/Template/Equipamentos",
		"/home/ivanov/Documentos/sgl/src/Template/Layout",
		"/home/ivanov/Documentos/sgl/src/Template/Locals",
		"/home/ivanov/Documentos/sgl/webroot",
		"/home/ivanov/Documentos/sgl/webroot/js",
		"/home/ivanov/Documentos/sgl/webroot/semantic-ui/dist"
	],
	"file_history":
	[
		"/home/ivanov/Documentos/sgl/webroot/js/alertas.js",
		"/home/ivanov/Documentos/sgl/src/Template/Layout/default.ctp",
		"/var/www/html/Dropbox/sgl/form.html",
		"/home/ivanov/Documentos/sgl/src/Template/Equipamentos/add.ctp",
		"/home/ivanov/Documentos/sgl/src/Template/Equipamentos/cadastrar.ctp",
		"/home/ivanov/Documentos/sgl/src/Controller/AppController.php",
		"/home/ivanov/Documentos/sgl/webroot/semantic-ui/dist/semantic.min.css",
		"/home/ivanov/Documentos/sgl/untitled.sublime-project",
		"/home/ivanov/Downloads/sgl.sql",
		"/home/ivanov/Downloads/sgl (1).sql"
	],
	"find":
	{
		"height": 34.0
	},
	"find_in_files":
	{
		"height": 0.0,
		"where_history":
		[
		]
	},
	"find_state":
	{
		"case_sensitive": false,
		"find_history":
		[
			".ui.modal"
		],
		"highlight": true,
		"in_selection": false,
		"preserve_case": false,
		"regex": false,
		"replace_history":
		[
		],
		"reverse": false,
		"show_context": true,
		"use_buffer2": true,
		"whole_word": false,
		"wrap": true
	},
	"groups":
	[
		{
			"selected": 2,
			"sheets":
			[
				{
					"buffer": 0,
					"file": "src/Template/Locals/view.ctp",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2089,
						"regions":
						{
						},
						"selection":
						[
							[
								1592,
								1592
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.sublime-syntax",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 378.0,
						"zoom_level": 1.0
					},
					"stack_index": 2,
					"type": "text"
				},
				{
					"buffer": 1,
					"file": "webroot/js/equipamentos.js",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 4877,
						"regions":
						{
						},
						"selection":
						[
							[
								4253,
								4253
							]
						],
						"settings":
						{
							"syntax": "Packages/JavaScript/JavaScript.sublime-syntax",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 0.0,
						"translation.y": 840.0,
						"zoom_level": 1.0
					},
					"stack_index": 1,
					"type": "text"
				},
				{
					"buffer": 2,
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 5192,
						"regions":
						{
						},
						"selection":
						[
							[
								3058,
								3058
							]
						],
						"settings":
						{
							"auto_name": "$(document).ready(function(){",
							"syntax": "Packages/JavaScript/JavaScript.sublime-syntax",
							"translate_tabs_to_spaces": false
						},
						"translation.x": 129.0,
						"translation.y": 210.0,
						"zoom_level": 1.0
					},
					"stack_index": 0,
					"type": "text"
				},
				{
					"buffer": 3,
					"file": "src/Controller/EquipamentosController.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 3927,
						"regions":
						{
						},
						"selection":
						[
							[
								3891,
								3891
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 1204.0,
						"zoom_level": 1.0
					},
					"stack_index": 4,
					"type": "text"
				},
				{
					"buffer": 4,
					"file": "config/routes.php",
					"semi_transient": false,
					"settings":
					{
						"buffer_size": 2998,
						"regions":
						{
						},
						"selection":
						[
							[
								2141,
								2141
							]
						],
						"settings":
						{
							"syntax": "Packages/PHP/PHP.sublime-syntax",
							"tab_size": 4,
							"translate_tabs_to_spaces": true
						},
						"translation.x": 0.0,
						"translation.y": 420.0,
						"zoom_level": 1.0
					},
					"stack_index": 3,
					"type": "text"
				}
			]
		}
	],
	"incremental_find":
	{
		"height": 0.0
	},
	"input":
	{
		"height": 31.0
	},
	"layout":
	{
		"cells":
		[
			[
				0,
				0,
				1,
				1
			]
		],
		"cols":
		[
			0.0,
			1.0
		],
		"rows":
		[
			0.0,
			1.0
		]
	},
	"menu_visible": true,
	"output.find_results":
	{
		"height": 0.0
	},
	"pinned_build_system": "",
	"project": "sgl.sublime-project",
	"replace":
	{
		"height": 0.0
	},
	"save_all_on_build": true,
	"select_file":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_project":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"select_symbol":
	{
		"height": 0.0,
		"last_filter": "",
		"selected_items":
		[
		],
		"width": 0.0
	},
	"selected_group": 0,
	"settings":
	{
	},
	"show_minimap": true,
	"show_open_files": false,
	"show_tabs": true,
	"side_bar_visible": true,
	"side_bar_width": 213.0,
	"status_bar_visible": true,
	"template_settings":
	{
	}
}
